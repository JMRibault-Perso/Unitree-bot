<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G1 Arm Teaching - Coordinate Recording</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .connection-status {
            text-align: center;
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 8px;
            font-weight: bold;
        }
        
        .status-disconnected {
            background: #fee;
            color: #c33;
        }
        
        .status-connected {
            background: #efe;
            color: #3c3;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .panel {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e0e0e0;
        }
        
        .panel h2 {
            color: #444;
            margin-bottom: 15px;
            font-size: 18px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }
        
        .arm-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .arm-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid #667eea;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .arm-btn:hover {
            background: #f0f4ff;
        }
        
        .arm-btn.active {
            background: #667eea;
            color: white;
        }
        
        .joint-control {
            margin-bottom: 15px;
        }
        
        .joint-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 13px;
            color: #555;
        }
        
        .joint-value {
            font-weight: bold;
            color: #667eea;
        }
        
        .joint-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            outline: none;
            background: #ddd;
            cursor: pointer;
        }
        
        .joint-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        
        .joint-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }
        
        .control-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }
        
        .btn-danger {
            background: #ef4444;
            color: white;
        }
        
        .btn-danger:hover {
            background: #dc2626;
        }
        
        .btn-warning {
            background: #f59e0b;
            color: white;
        }
        
        .btn-warning:hover {
            background: #d97706;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .recording-indicator {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px;
            background: #fef3c7;
            border-radius: 8px;
            margin-top: 15px;
            animation: pulse 2s infinite;
        }
        
        .recording-indicator.active {
            display: flex;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .recording-dot {
            width: 12px;
            height: 12px;
            background: #ef4444;
            border-radius: 50%;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        .waypoint-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .waypoint-item {
            background: white;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #e0e0e0;
        }
        
        .waypoint-info {
            flex: 1;
        }
        
        .waypoint-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
        }
        
        .waypoint-joints {
            font-size: 11px;
            color: #777;
        }
        
        .waypoint-actions {
            display: flex;
            gap: 5px;
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }
        
        .status-log {
            background: #1e293b;
            color: #10b981;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .status-log-entry {
            margin-bottom: 5px;
        }
        
        .timestamp {
            color: #64748b;
            margin-right: 10px;
        }
        
        .error {
            color: #ef4444 !important;
        }
        
        .success {
            color: #10b981 !important;
        }
        
        .full-width-btn {
            grid-column: 1 / -1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü¶æ G1 Arm Teaching Interface</h1>
        <p class="subtitle">Record and playback arm motions using joint coordinates</p>
        
        <div id="connectionStatus" class="connection-status status-disconnected">
            ‚ö†Ô∏è Disconnected from Robot
        </div>
        
        <div class="main-grid">
            <!-- Left Panel: Manual Joint Control -->
            <div class="panel">
                <h2>Manual Joint Control</h2>
                
                <div class="arm-selector">
                    <button class="arm-btn active" id="leftArmBtn" onclick="selectArm('left')">Left Arm</button>
                    <button class="arm-btn" id="rightArmBtn" onclick="selectArm('right')">Right Arm</button>
                </div>
                
                <div id="jointControls">
                    <!-- Joint 0: Shoulder Pitch -->
                    <div class="joint-control">
                        <div class="joint-label">
                            <span>Shoulder Pitch</span>
                            <span class="joint-value" id="joint0Value">0.00¬∞</span>
                        </div>
                        <input type="range" class="joint-slider" id="joint0" 
                               min="-180" max="180" value="0" step="1"
                               oninput="updateJointDisplay(0, this.value)">
                    </div>
                    
                    <!-- Joint 1: Shoulder Roll -->
                    <div class="joint-control">
                        <div class="joint-label">
                            <span>Shoulder Roll</span>
                            <span class="joint-value" id="joint1Value">0.00¬∞</span>
                        </div>
                        <input type="range" class="joint-slider" id="joint1" 
                               min="-180" max="180" value="0" step="1"
                               oninput="updateJointDisplay(1, this.value)">
                    </div>
                    
                    <!-- Joint 2: Shoulder Yaw -->
                    <div class="joint-control">
                        <div class="joint-label">
                            <span>Shoulder Yaw</span>
                            <span class="joint-value" id="joint2Value">0.00¬∞</span>
                        </div>
                        <input type="range" class="joint-slider" id="joint2" 
                               min="-180" max="180" value="0" step="1"
                               oninput="updateJointDisplay(2, this.value)">
                    </div>
                    
                    <!-- Joint 3: Elbow -->
                    <div class="joint-control">
                        <div class="joint-label">
                            <span>Elbow</span>
                            <span class="joint-value" id="joint3Value">0.00¬∞</span>
                        </div>
                        <input type="range" class="joint-slider" id="joint3" 
                               min="0" max="180" value="0" step="1"
                               oninput="updateJointDisplay(3, this.value)">
                    </div>
                    
                    <!-- Joint 4: Wrist Roll -->
                    <div class="joint-control">
                        <div class="joint-label">
                            <span>Wrist Roll</span>
                            <span class="joint-value" id="joint4Value">0.00¬∞</span>
                        </div>
                        <input type="range" class="joint-slider" id="joint4" 
                               min="-180" max="180" value="0" step="1"
                               oninput="updateJointDisplay(4, this.value)">
                    </div>
                    
                    <!-- Joint 5: Wrist Pitch -->
                    <div class="joint-control">
                        <div class="joint-label">
                            <span>Wrist Pitch</span>
                            <span class="joint-value" id="joint5Value">0.00¬∞</span>
                        </div>
                        <input type="range" class="joint-slider" id="joint5" 
                               min="-180" max="180" value="0" step="1"
                               oninput="updateJointDisplay(5, this.value)">
                    </div>
                    
                    <!-- Joint 6: Wrist Yaw -->
                    <div class="joint-control">
                        <div class="joint-label">
                            <span>Wrist Yaw</span>
                            <span class="joint-value" id="joint6Value">0.00¬∞</span>
                        </div>
                        <input type="range" class="joint-slider" id="joint6" 
                               min="-180" max="180" value="0" step="1"
                               oninput="updateJointDisplay(6, this.value)">
                    </div>
                </div>
                
                <div class="control-buttons">
                    <button class="btn btn-primary" onclick="sendCurrentPose()">Send to Robot</button>
                    <button class="btn btn-warning" onclick="readCurrentPose()">Read from Robot</button>
                    <button class="btn btn-success full-width-btn" onclick="captureWaypoint()">
                        üìç Capture Waypoint
                    </button>
                </div>
                
                <div class="recording-indicator" id="recordingIndicator">
                    <div class="recording-dot"></div>
                    <span>Recording trajectory...</span>
                </div>
            </div>
            
            <!-- Right Panel: Recorded Waypoints -->
            <div class="panel">
                <h2>Recorded Motion Sequence</h2>
                
                <div class="control-buttons">
                    <button class="btn btn-success" onclick="startRecording()" id="startRecBtn">
                        ‚è∫Ô∏è Start Recording
                    </button>
                    <button class="btn btn-danger" onclick="stopRecording()" id="stopRecBtn" disabled>
                        ‚èπÔ∏è Stop Recording
                    </button>
                    <button class="btn btn-primary" onclick="playSequence()" id="playBtn" disabled>
                        ‚ñ∂Ô∏è Play Sequence
                    </button>
                    <button class="btn btn-warning" onclick="clearWaypoints()">
                        üóëÔ∏è Clear All
                    </button>
                </div>
                
                <div class="waypoint-list" id="waypointList">
                    <p style="text-align: center; color: #999; padding: 20px;">
                        No waypoints recorded yet.<br>
                        Capture waypoints to build a motion sequence.
                    </p>
                </div>
                
                <div class="control-buttons">
                    <button class="btn btn-success full-width-btn" onclick="saveSequence()">
                        üíæ Save Sequence
                    </button>
                    <button class="btn btn-primary full-width-btn" onclick="loadSequence()">
                        üìÇ Load Sequence
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Status Log -->
        <div class="status-log" id="statusLog">
            <div class="status-log-entry">
                <span class="timestamp">[00:00:00]</span>
                <span>Arm Teaching Interface Ready</span>
            </div>
        </div>
    </div>
    
    <script>
        let currentArm = 'left';
        let waypoints = [];
        let isRecording = false;
        let recordingInterval = null;
        let ws = null;
        let debugMode = true;  // Enable detailed logging
        
        // Joint names for display
        const jointNames = [
            'Shoulder Pitch', 'Shoulder Roll', 'Shoulder Yaw',
            'Elbow', 'Wrist Roll', 'Wrist Pitch', 'Wrist Yaw'
        ];
        
        // Debug logger
        function debug(...args) {
            if (debugMode) {
                console.log('[ARM DEBUG]', new Date().toISOString(), ...args);
            }
        }
        
        function debugError(...args) {
            console.error('[ARM ERROR]', new Date().toISOString(), ...args);
        }
        
        // Initialize WebSocket connection
        function connectWebSocket() {
            const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsUrl = `${protocol}//${window.location.host}/ws`;
            
            debug('Connecting to WebSocket:', wsUrl);
            ws = new WebSocket(wsUrl);
            
            ws.onopen = () => {
                debug('WebSocket connection opened');
                log('‚úÖ Connected to robot', 'success');
                updateConnectionStatus(true);
            };
            
            ws.onclose = (event) => {
                debug('WebSocket closed:', event.code, event.reason);
                log('‚ùå Disconnected from robot', 'error');
                updateConnectionStatus(false);
                debug('Reconnecting in 3 seconds...');
                setTimeout(connectWebSocket, 3000);
            };
            
            ws.onerror = (error) => {
                debugError('WebSocket error:', error);
                log('‚ö†Ô∏è WebSocket error', 'error');
            };
            
            ws.onmessage = (event) => {
                debug('WebSocket message received:', event.data);
                try {
                    const data = JSON.parse(event.data);
                    debug('Parsed message:', data);
                    handleWebSocketMessage(data);
                } catch (e) {
                    debugError('Failed to parse WebSocket message:', e, event.data);
                }
            };
        }
        
        function handleWebSocketMessage(data) {
            if (data.type === 'arm_pose') {
                // Update sliders with current robot pose
                data.joints.forEach((angle, idx) => {
                    const degrees = (angle * 180 / Math.PI).toFixed(2);
                    document.getElementById(`joint${idx}`).value = degrees;
                    updateJointDisplay(idx, degrees);
                });
                log(`üì• Received arm pose from robot`);
            }
        }
        
        function updateConnectionStatus(connected) {
            const statusDiv = document.getElementById('connectionStatus');
            if (connected) {
                statusDiv.className = 'connection-status status-connected';
                statusDiv.textContent = '‚úÖ Connected to Robot';
            } else {
                statusDiv.className = 'connection-status status-disconnected';
                statusDiv.textContent = '‚ö†Ô∏è Disconnected from Robot';
            }
        }
        
        function selectArm(arm) {
            currentArm = arm;
            document.getElementById('leftArmBtn').classList.toggle('active', arm === 'left');
            document.getElementById('rightArmBtn').classList.toggle('active', arm === 'right');
            log(`Switched to ${arm} arm`);
        }
        
        function updateJointDisplay(jointIdx, degrees) {
            document.getElementById(`joint${jointIdx}Value`).textContent = parseFloat(degrees).toFixed(2) + '¬∞';
        }
        
        function getCurrentJointAngles() {
            const angles = [];
            for (let i = 0; i < 7; i++) {
                const degrees = parseFloat(document.getElementById(`joint${i}`).value);
                angles.push(degrees * Math.PI / 180); // Convert to radians
            }
            return angles;
        }
        
        async function sendCurrentPose() {
            const joints = getCurrentJointAngles();
            
            debug('sendCurrentPose() called');
            debug('Current arm:', currentArm);
            debug('Joint angles (radians):', joints);
            debug('Joint angles (degrees):', joints.map(j => (j * 180 / Math.PI).toFixed(2)));
            
            const payload = {
                arm: currentArm,
                joints: joints,
                speed: 1.0
            };
            debug('API payload:', payload);
            
            try {
                debug('Sending POST to /api/arm/move...');
                const response = await fetch('/api/arm/move', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                debug('Response status:', response.status, response.statusText);
                const result = await response.json();
                debug('Response data:', result);
                
                if (result.success) {
                    log(`‚úÖ Sent pose to ${currentArm} arm`, 'success');
                } else {
                    log(`‚ùå Failed to send pose: ${result.error}`, 'error');
                    debugError('Server returned error:', result);
                }
            } catch (error) {
                debugError('Exception during sendCurrentPose:', error);
                log(`‚ùå Error sending pose: ${error.message}`, 'error');
            }
        }
        
        async function readCurrentPose() {
            debug('readCurrentPose() called for arm:', currentArm);
            
            try {
                const url = `/api/arm/read?arm=${currentArm}`;
                debug('Fetching from:', url);
                
                const response = await fetch(url);
                debug('Read response status:', response.status);
                
                const result = await response.json();
                debug('Read response data:', result);
                
                if (result.success) {
                    debug('Received joints (radians):', result.joints);
                    debug('Received joints (degrees):', result.joints.map(j => (j * 180 / Math.PI).toFixed(2)));
                    
                    result.joints.forEach((angle, idx) => {
                        const degrees = (angle * 180 / Math.PI).toFixed(2);
                        document.getElementById(`joint${idx}`).value = degrees;
                        updateJointDisplay(idx, degrees);
                    });
                    log(`‚úÖ Read pose from ${currentArm} arm`, 'success');
                } else {
                    log(`‚ùå Failed to read pose: ${result.error}`, 'error');
                    debugError('Read failed:', result);
                }
            } catch (error) {
                debugError('Exception during readCurrentPose:', error);
                log(`‚ùå Error reading pose: ${error.message}`, 'error');
            }
        }
        
        function captureWaypoint() {
            const joints = getCurrentJointAngles();
            const waypoint = {
                id: waypoints.length,
                arm: currentArm,
                joints: joints,
                timestamp: new Date().toISOString()
            };
            
            waypoints.push(waypoint);
            renderWaypoints();
            updatePlayButton();
            log(`üìç Captured waypoint #${waypoints.length}`, 'success');
        }
        
        function renderWaypoints() {
            const listDiv = document.getElementById('waypointList');
            
            if (waypoints.length === 0) {
                listDiv.innerHTML = `
                    <p style="text-align: center; color: #999; padding: 20px;">
                        No waypoints recorded yet.<br>
                        Capture waypoints to build a motion sequence.
                    </p>
                `;
                return;
            }
            
            listDiv.innerHTML = waypoints.map((wp, idx) => `
                <div class="waypoint-item">
                    <div class="waypoint-info">
                        <div class="waypoint-name">Waypoint #${idx + 1} (${wp.arm} arm)</div>
                        <div class="waypoint-joints">
                            ${wp.joints.map((j, i) => `${jointNames[i]}: ${(j * 180 / Math.PI).toFixed(1)}¬∞`).slice(0, 3).join(', ')}...
                        </div>
                    </div>
                    <div class="waypoint-actions">
                        <button class="btn btn-primary btn-small" onclick="loadWaypoint(${idx})">Load</button>
                        <button class="btn btn-danger btn-small" onclick="deleteWaypoint(${idx})">Delete</button>
                    </div>
                </div>
            `).join('');
        }
        
        function loadWaypoint(idx) {
            const wp = waypoints[idx];
            selectArm(wp.arm);
            
            wp.joints.forEach((angle, i) => {
                const degrees = (angle * 180 / Math.PI).toFixed(2);
                document.getElementById(`joint${i}`).value = degrees;
                updateJointDisplay(i, degrees);
            });
            
            log(`üìÇ Loaded waypoint #${idx + 1}`);
        }
        
        function deleteWaypoint(idx) {
            waypoints.splice(idx, 1);
            renderWaypoints();
            updatePlayButton();
            log(`üóëÔ∏è Deleted waypoint #${idx + 1}`);
        }
        
        function clearWaypoints() {
            if (waypoints.length === 0) return;
            
            if (confirm(`Delete all ${waypoints.length} waypoints?`)) {
                waypoints = [];
                renderWaypoints();
                updatePlayButton();
                log('üóëÔ∏è Cleared all waypoints');
            }
        }
        
        function updatePlayButton() {
            document.getElementById('playBtn').disabled = waypoints.length === 0;
        }
        
        function startRecording() {
            if (isRecording) return;
            
            isRecording = true;
            document.getElementById('startRecBtn').disabled = true;
            document.getElementById('stopRecBtn').disabled = false;
            document.getElementById('recordingIndicator').classList.add('active');
            
            log('‚è∫Ô∏è Started recording trajectory', 'success');
            
            // Capture waypoint every 500ms
            recordingInterval = setInterval(() => {
                captureWaypoint();
            }, 500);
        }
        
        function stopRecording() {
            if (!isRecording) return;
            
            isRecording = false;
            document.getElementById('startRecBtn').disabled = false;
            document.getElementById('stopRecBtn').disabled = true;
            document.getElementById('recordingIndicator').classList.remove('active');
            
            if (recordingInterval) {
                clearInterval(recordingInterval);
                recordingInterval = null;
            }
            
            log('‚èπÔ∏è Stopped recording', 'success');
        }
        
        async function playSequence() {
            if (waypoints.length === 0) {
                debug('playSequence() called but no waypoints');
                return;
            }
            
            debug('playSequence() called with', waypoints.length, 'waypoints');
            debug('Waypoints:', waypoints);
            log(`‚ñ∂Ô∏è Playing sequence (${waypoints.length} waypoints)...`, 'success');
            
            const payload = {
                waypoints: waypoints,
                speed: 1.0
            };
            debug('Sequence payload:', payload);
            
            try {
                debug('Sending POST to /api/arm/play_sequence...');
                const response = await fetch('/api/arm/play_sequence', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                debug('Playback response status:', response.status);
                const result = await response.json();
                debug('Playback response data:', result);
                
                if (result.success) {
                    log(`‚úÖ Sequence playback completed`, 'success');
                } else {
                    log(`‚ùå Playback failed: ${result.error}`, 'error');
                    debugError('Playback error:', result);
                }
            } catch (error) {
                debugError('Exception during playSequence:', error);
                log(`‚ùå Error during playback: ${error.message}`, 'error');
            }
        }
        
        function saveSequence() {
            if (waypoints.length === 0) {
                alert('No waypoints to save!');
                return;
            }
            
            const name = prompt('Enter sequence name:');
            if (!name) return;
            
            const sequenceData = {
                name: name,
                created: new Date().toISOString(),
                waypoints: waypoints
            };
            
            const dataStr = JSON.stringify(sequenceData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `${name.replace(/\s+/g, '_')}_sequence.json`;
            link.click();
            
            log(`üíæ Saved sequence "${name}"`, 'success');
        }
        
        function loadSequence() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = (e) => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = (event) => {
                    try {
                        const data = JSON.parse(event.target.result);
                        waypoints = data.waypoints || [];
                        renderWaypoints();
                        updatePlayButton();
                        log(`üìÇ Loaded sequence "${data.name}" (${waypoints.length} waypoints)`, 'success');
                    } catch (error) {
                        log(`‚ùå Failed to load sequence: ${error.message}`, 'error');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        function log(message, type = 'info') {
            const logDiv = document.getElementById('statusLog');
            const now = new Date();
            const timestamp = now.toTimeString().split(' ')[0];
            
            const entry = document.createElement('div');
            entry.className = `status-log-entry ${type}`;
            entry.innerHTML = `<span class="timestamp">[${timestamp}]</span><span>${message}</span>`;
            
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
            
            // Keep only last 50 entries
            while (logDiv.children.length > 50) {
                logDiv.removeChild(logDiv.firstChild);
            }
        }
        
        // Initialize on page load
        window.onload = () => {
            debug('=== ARM TEACHING INTERFACE STARTING ===');
            debug('Debug mode:', debugMode);
            debug('Current URL:', window.location.href);
            debug('User agent:', navigator.userAgent);
            debug('Initial arm:', currentArm);
            
            connectWebSocket();
            log('ü¶æ Arm Teaching Interface initialized');
            
            debug('=== INITIALIZATION COMPLETE ===');
            debug('Open browser console (F12) to see detailed debug logs');
            console.log('%cü¶æ ARM TEACHING DEBUG MODE ENABLED', 'background: #667eea; color: white; font-size: 14px; padding: 5px;');
        };
    </script>
</body>
</html>
